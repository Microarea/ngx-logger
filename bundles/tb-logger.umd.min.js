!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@angular/common/http"),require("rxjs/operators"),require("rxjs"),require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("@progress/kendo-angular-buttons"),require("@progress/kendo-angular-dropdowns"),require("@progress/kendo-angular-inputs"),require("@progress/kendo-angular-dateinputs"),require("@progress/kendo-angular-notification"),require("@stomp/ng2-stompjs")):"function"==typeof define&&define.amd?define("@tb/logger",["exports","@angular/common/http","rxjs/operators","rxjs","@angular/core","@angular/common","@angular/forms","@progress/kendo-angular-buttons","@progress/kendo-angular-dropdowns","@progress/kendo-angular-inputs","@progress/kendo-angular-dateinputs","@progress/kendo-angular-notification","@stomp/ng2-stompjs"],r):r((e.tb=e.tb||{},e.tb.logger={}),e.ng.common.http,e.rxjs.operators,e.rxjs,e.ng.core,e.ng.common,e.ng.forms,e.kendoAngularButtons,e.kendoAngularDropdowns,e.kendoAngularInputs,e.kendoAngularDateinputs,e.i1$1,e.i2)}(this,function(e,i,a,s,r,t,o,n,p,c,u,g,l){"use strict";function f(){}function d(){}function h(){}function v(){}function m(){}function y(){}var S=function T(){},b={Info:0,Debug:1,Warn:2,Error:3,Fatal:4};function I(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var o,n,i=t.call(e),a=[];try{for(;(void 0===r||0<r--)&&!(o=i.next()).done;)a.push(o.value)}catch(s){n={error:s}}finally{try{o&&!o.done&&(t=i["return"])&&t.call(i)}finally{if(n)throw n.error}}return a}function E(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(I(arguments[r]));return e}b[b.Info]="Info",b[b.Debug]="Debug",b[b.Warn]="Warn",b[b.Error]="Error",b[b.Fatal]="Fatal";var L=(M.prototype.mqInit=function(){var r=this;this.env.stompConfig&&(this.stompService.config=this.env.stompConfig,this.stompService.initAndConnect(),this.stompService.state.subscribe(function(e){r.mqConnectionState=e,r.mqConnectionStateObservable.next(e)}))},M.prototype.getLoggerUrl=function(){return this.loggerUrl?this.loggerUrl:this.env.logger.url},M.prototype.getServerMonitorUrl=function(){return this.serverMonitorUrl?this.serverMonitorUrl:this.env.serverMonitor.url},M.prototype.log=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];console.log.apply(console,E([e],r))},M.prototype.debug=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];console.log.apply(console,E([e],r))},M.prototype.warn=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];console.warn.apply(console,E([e],r))},M.prototype.error=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];console.error.apply(console,E([e],r))},M.prototype.getLogs=function(e){if(!e.instanceKey){var r=new S;return r.Result=!1,r.Message="Error - No instanceKey, no party",s.of(r)}var t=this.getLoggerUrl()+"entries/"+e.instanceKey,o=new i.HttpParams;o=o.append("howMany",""+this.howMany),e.accountName&&(o=o.append("accountName",e.accountName)),e.subscriptionKey&&(o=o.append("subscription",e.subscriptionKey)),e.category&&(o=o.append("categories",e.category)),e.apps&&(o=o.append("apps",e.apps)),e.appTypes&&(o=o.append("appTypes",e.appTypes)),e.levels&&(o=o.append("levels",e.levels)),e.rangeDateStart&&e.rangeDateEnd&&(o=e.rangeDateStart===e.rangeDateEnd?o.append("date",e.rangeDateStart):o.append("date",e.rangeDateStart+";"+e.rangeDateEnd));var n={params:o};return this.http.get(t,n).pipe(a.catchError(this.handleError("TbLoggerService.getLogs",!1)))},M.prototype.getApps=function(e){if(!e){var r=new S;return r.Result=!1,r.Message="Error - No appId, no party",s.of(r)}var t=this.getLoggerUrl()+"apps/"+e;return this.http.get(t).pipe(a.catchError(this.handleError("TbLoggerService.getApps",!1)))},M.prototype.getAppTypes=function(e){if(!e){var r=new S;return r.Result=!1,r.Message="Error - No appId, no party",s.of(r)}var t=this.getLoggerUrl()+"appTypes/"+e;return this.http.get(t).pipe(a.catchError(this.handleError("TbLoggerService.getAppTypes",!1)))},M.prototype.getInstanceKey=function(){var e=this.getLoggerUrl()+"appIds";return this.http.get(e).pipe(a.catchError(this.handleError("TbLoggerService.getInstanceKey",!1)))},M.prototype.getSubscriptionKey=function(){var e=this.getLoggerUrl()+"subscriptionKeys";return this.http.get(e).pipe(a.catchError(this.handleError("TbLoggerService.getSubscriptionKey",!1)))},M.prototype.getCategories=function(e){if(!e){var r=new S;return r.Result=!1,r.Message="Error - No appId, no party",s.of(r)}var t=this.getLoggerUrl()+"categories/"+e;return this.http.get(t).pipe(a.catchError(this.handleError("TbLoggerService.getCategories",!1)))},M.prototype.handleError=function(r,t){return void 0===r&&(r="operation"),function(e){return console.error(r+" failed: "+e.error),s.of(t)}},M.prototype.mqConnect=function(e){return this.stompService.subscribe(e).pipe(a.map(function(e){return JSON.parse(e.body)}))},M.prototype.mqConnected=function(){return this.stompService.connected()},M.prototype.mqDisconnect=function(){return this.stompService.disconnect()},M.prototype.getTBInfosLogs=function(e){var r=new i.HttpParams;e.accountName&&(r=r.append("accountName",""+e.accountName)),e.processName&&(r=r.append("processName",""+e.processName)),e.minutes&&(r=r.append("minute",""+e.minutes));var t={params:r},o=this.getServerMonitorUrl()+"tbServers/"+e.instanceKey;return this.http.get(o,t).pipe(a.catchError(this.handleError("TbLoggerService.getTBInfosLogs",!1)))},M.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],M.ctorParameters=function(){return[{type:undefined,decorators:[{type:r.Inject,args:["env"]}]},{type:i.HttpClient},{type:l.StompRService}]},M.ngInjectableDef=r.defineInjectable({factory:function(){return new M(r.inject("env"),r.inject(i.HttpClient),r.inject(l.StompRService))},token:M,providedIn:"root"}),M);function M(e,r,t){this.env=e,this.http=r,this.stompService=t,this.howMany=100,this.mqConnectionState=l.StompState.CLOSED,this.mqConnectionStateObservable=new s.BehaviorSubject(l.StompState.CLOSED),e.stompConfig&&this.mqInit()}var j=(q.prototype.show=function(e,r){void 0===r&&(r="none"),this.notificationService.show({content:e,animation:{type:"slide",duration:200},position:{horizontal:"right",vertical:"bottom"},type:{style:r,icon:!0},hideAfter:4e3})},q.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],q.ctorParameters=function(){return[{type:g.NotificationService}]},q.ngInjectableDef=r.defineInjectable({factory:function(){return new q(r.inject(g.NotificationService))},token:q,providedIn:"root"}),q);function q(e){this.notificationService=e}var w=(D.forRoot=function(){return{ngModule:D,providers:[l.StompRService]}},D.decorators=[{type:r.NgModule,args:[{imports:[t.CommonModule,g.NotificationModule,n.ButtonsModule,c.InputsModule,u.DateInputsModule,o.FormsModule,p.DropDownsModule],providers:[l.StompRService]}]}],D);function D(){}e.EntriesParams=f,e.MonitorParams=d,e.OperationResult=h,e.LoggerOperationResult=S,e.TBServerInfos=v,e.TBServerInfo=m,e.Log=y,e.LogStatus=b,e.TbLoggerService=L,e.TbNotificationService=j,e.TbLoggerModule=w,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=tb-logger.umd.min.js.map