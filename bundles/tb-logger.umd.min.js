!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@angular/core"),require("@angular/common/http"),require("rxjs/operators"),require("rxjs"),require("@stomp/ng2-stompjs"),require("@progress/kendo-angular-notification"),require("@angular/common"),require("@angular/forms"),require("@progress/kendo-angular-buttons"),require("@progress/kendo-angular-dropdowns"),require("@progress/kendo-angular-inputs"),require("@progress/kendo-angular-dateinputs")):"function"==typeof define&&define.amd?define("@tb/logger",["exports","@angular/core","@angular/common/http","rxjs/operators","rxjs","@stomp/ng2-stompjs","@progress/kendo-angular-notification","@angular/common","@angular/forms","@progress/kendo-angular-buttons","@progress/kendo-angular-dropdowns","@progress/kendo-angular-inputs","@progress/kendo-angular-dateinputs"],r):r((e.tb=e.tb||{},e.tb.logger={}),e.ng.core,e.ng.common.http,e.rxjs.operators,e.rxjs,null,null,e.ng.common,e.ng.forms,null,null,null,null)}(this,function(e,r,i,a,s,o,t,n,p,c,u,g,l){"use strict";function f(){}function d(){}function h(){}function v(){}function m(){}function y(){}var S=function D(){},b={Info:0,Debug:1,Warn:2,Error:3,Fatal:4};function E(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var o,n,i=t.call(e),a=[];try{for(;(void 0===r||0<r--)&&!(o=i.next()).done;)a.push(o.value)}catch(s){n={error:s}}finally{try{o&&!o.done&&(t=i["return"])&&t.call(i)}finally{if(n)throw n.error}}return a}function I(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(E(arguments[r]));return e}b[b.Info]="Info",b[b.Debug]="Debug",b[b.Warn]="Warn",b[b.Error]="Error",b[b.Fatal]="Fatal";var L=(j.prototype.mqInit=function(){var r=this;this.env.stompConfig&&(this.stompService.config=this.env.stompConfig,this.stompService.initAndConnect(),this.stompService.state.subscribe(function(e){r.mqConnectionState=e,r.mqConnectionStateObservable.next(e)}))},j.prototype.getLoggerUrl=function(){return this.loggerUrl?this.loggerUrl:this.env.logger.url},j.prototype.getServerMonitorUrl=function(){return this.serverMonitorUrl?this.serverMonitorUrl:this.env.serverMonitor.url},j.prototype.log=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];console.log.apply(console,I([e],r))},j.prototype.debug=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];console.log.apply(console,I([e],r))},j.prototype.warn=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];console.warn.apply(console,I([e],r))},j.prototype.error=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];console.error.apply(console,I([e],r))},j.prototype.getLogs=function(e){if(!e.instanceKey){var r=new S;return r.result=!1,r.message="Error - No instanceKey, no party",s.of(r)}var t=this.getLoggerUrl()+"entries/"+e.instanceKey,o=new i.HttpParams;o=o.append("howMany",""+this.howMany),e.accountName&&(o=o.append("accountName",e.accountName)),e.subscriptionKey&&(o=o.append("subscription",e.subscriptionKey)),e.category&&(o=o.append("categories",e.category)),e.apps&&(o=o.append("apps",e.apps)),e.appTypes&&(o=o.append("appTypes",e.appTypes)),e.levels&&(o=o.append("levels",e.levels)),e.rangeDateStart&&e.rangeDateEnd&&(o=e.rangeDateStart===e.rangeDateEnd?o.append("date",e.rangeDateStart):o.append("date",e.rangeDateStart+";"+e.rangeDateEnd));var n={params:o};return this.http.get(t,n).pipe(a.catchError(this.handleError("TbLoggerService.getLogs",!1)))},j.prototype.getApps=function(e){if(!e){var r=new S;return r.result=!1,r.message="Error - No appId, no party",s.of(r)}var t=this.getLoggerUrl()+"apps/"+e;return this.http.get(t).pipe(a.catchError(this.handleError("TbLoggerService.getApps",!1)))},j.prototype.getAppTypes=function(e){if(!e){var r=new S;return r.result=!1,r.message="Error - No appId, no party",s.of(r)}var t=this.getLoggerUrl()+"appTypes/"+e;return this.http.get(t).pipe(a.catchError(this.handleError("TbLoggerService.getAppTypes",!1)))},j.prototype.getInstanceKey=function(){var e=this.getLoggerUrl()+"appIds";return this.http.get(e).pipe(a.catchError(this.handleError("TbLoggerService.getInstanceKey",!1)))},j.prototype.getSubscriptionKey=function(){var e=this.getLoggerUrl()+"subscriptionKeys";return this.http.get(e).pipe(a.catchError(this.handleError("TbLoggerService.getSubscriptionKey",!1)))},j.prototype.getCategories=function(e){if(!e){var r=new S;return r.result=!1,r.message="Error - No appId, no party",s.of(r)}var t=this.getLoggerUrl()+"categories/"+e;return this.http.get(t).pipe(a.catchError(this.handleError("TbLoggerService.getCategories",!1)))},j.prototype.handleError=function(r,t){return void 0===r&&(r="operation"),function(e){return console.error(r+" failed: "+e.error),s.of(t)}},j.prototype.mqConnect=function(e){return this.stompService.subscribe(e).pipe(a.map(function(e){return JSON.parse(e.body)}))},j.prototype.mqConnected=function(){return this.stompService.connected()},j.prototype.mqDisconnect=function(){return this.stompService.disconnect()},j.prototype.getTBInfosLogs=function(e){var r=new i.HttpParams;e.processName&&(r=r.append("processName",""+e.processName));var t={params:r},o=this.getServerMonitorUrl()+"GetTbServersNumber/"+e.instanceKey;return this.http.get(o,t).pipe(a.catchError(this.handleError("TbLoggerService.getTBInfosLogs",!1)))},j.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],j.ctorParameters=function(){return[{type:undefined,decorators:[{type:r.Inject,args:["env"]}]},{type:i.HttpClient},{type:o.StompRService}]},j.ngInjectableDef=r.defineInjectable({factory:function(){return new j(r.inject("env"),r.inject(i.HttpClient),r.inject(o.StompRService))},token:j,providedIn:"root"}),j);function j(e,r,t){this.env=e,this.http=r,this.stompService=t,this.howMany=100,this.mqConnectionState=o.StompState.CLOSED,this.mqConnectionStateObservable=new s.BehaviorSubject(o.StompState.CLOSED),e.stompConfig&&this.mqInit()}var q=(T.prototype.show=function(e,r){void 0===r&&(r="none"),this.notificationService.show({content:e,animation:{type:"slide",duration:200},position:{horizontal:"right",vertical:"bottom"},type:{style:r,icon:!0},hideAfter:4e3})},T.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],T.ctorParameters=function(){return[{type:t.NotificationService}]},T.ngInjectableDef=r.defineInjectable({factory:function(){return new T(r.inject(t.NotificationService))},token:T,providedIn:"root"}),T);function T(e){this.notificationService=e}var w=(M.forRoot=function(){return{ngModule:M,providers:[o.StompRService]}},M.decorators=[{type:r.NgModule,args:[{imports:[n.CommonModule,t.NotificationModule,c.ButtonsModule,g.InputsModule,l.DateInputsModule,p.FormsModule,u.DropDownsModule],providers:[o.StompRService]}]}],M);function M(){}e.EntriesParams=f,e.MonitorParams=d,e.OperationResult=h,e.LoggerOperationResult=S,e.TBServerInfos=v,e.TBServerInfo=m,e.Log=y,e.LogStatus=b,e.TbLoggerService=L,e.TbNotificationService=q,e.TbLoggerModule=w,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=tb-logger.umd.min.js.map